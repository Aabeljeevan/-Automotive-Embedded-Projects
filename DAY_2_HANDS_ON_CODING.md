# ðŸš€ DAY 2 - HANDS-ON: Your First LED Blink!

**Date:** January 14, 2026
**Board:** STM32F303 Discovery (MB1035E)
**Time Needed:** 90-120 minutes
**Goal:** BLINK YOUR FIRST LED! ðŸ’¡

---

## ðŸŽ¯ What You'll Do Today:

1. âœ… Connect your STM32F303 board
2. âœ… Create your first project in STM32CubeIDE
3. âœ… Write code to blink LED (LD3 - North LED)
4. âœ… Upload and run on REAL hardware!
5. âœ… Understand EVERY line of code

**By the end: You'll have a WORKING embedded program running on real hardware!**

---

## Part 1: Know Your Board (10 mins)

### Your STM32F303 Discovery Board Has:

**8 LEDs in Compass Pattern:**
- **LD3** (North) - **PE9** (Red)
- **LD4** (NE) - **PE8** (Blue)
- **LD5** (East) - **PE10** (Orange)
- **LD6** (SE) - **PE15** (Green)
- **LD7** (South) - **PE11** (Green)
- **LD8** (SW) - **PE14** (Orange)
- **LD9** (West) - **PE12** (Blue)
- **LD10** (NW) - **PE13** (Red)

All LEDs are connected to **GPIO Port E**!

**2 Buttons:**
- **USER** button (PA0)
- **RESET** button

**Microcontroller:**
- **STM32F303VCT6**
- ARM Cortex-M4F (with FPU!)
- 256 KB Flash, 48 KB RAM
- 72 MHz max frequency

---

## Part 2: Create Your First Project (20 mins)

### Step-by-Step Setup:

#### 1ï¸âƒ£ Open STM32CubeIDE
- Launch from: `C:\PersonalLearning\STM32CubeIDE`
- Workspace: `C:\PersonalLearning\STM32_Workspace`

#### 2ï¸âƒ£ Create New Project
1. File â†’ New â†’ STM32 Project
2. **Board Selector** tab
3. Type: "STM32F3DISCOVERY"
4. Select: **STM32F3DISCOVERY**
5. Click **Next**
6. Project Name: `LED_Blink_Project`
7. Click **Finish**
8. Click **Yes** to initialize peripherals

#### 3ï¸âƒ£ Configure LED Pin (In CubeMX)

**Pin Configuration:**
1. In the pinout view, find **PE9**
2. Click on PE9 â†’ Select **GPIO_Output**
3. Right-click PE9 â†’ **User Label** â†’ Type: `LED_NORTH`

**GPIO Settings:**
1. Click **System Core** â†’ **GPIO**
2. Select **PE9** in the list
3. Settings:
   - GPIO mode: `Output Push Pull`
   - GPIO Pull-up/Pull-down: `No pull-up and no pull-down`
   - Maximum output speed: `Low`
   - User Label: `LED_NORTH`

**Clock Configuration:**
1. Click **Clock Configuration** tab
2. Default is fine (8 MHz HSI â†’ 72 MHz system clock)

#### 4ï¸âƒ£ Generate Code
1. Click **Project** â†’ **Generate Code** (or Ctrl+S)
2. Click **Yes** if prompted
3. Wait for code generation

---

## Part 3: Your First Code! (30 mins)

### Understanding the Generated Code:

STM32CubeIDE created a file: `main.c`

Open it: `Core/Src/main.c`

**You'll see a lot of auto-generated code. DON'T PANIC!**

Find this section:

```c
/* USER CODE BEGIN 3 */
}
/* USER CODE END 3 */
```

**This is where YOUR code goes!**

---

### ðŸŽ¯ MISSION 1: Blink LED Once

**Find the infinite loop in `main.c`:**

```c
/* Infinite loop */
/* USER CODE BEGIN WHILE */
while (1)
{
  /* USER CODE END WHILE */

  /* USER CODE BEGIN 3 */
}
/* USER CODE END 3 */
```

**Add this code between the USER CODE BEGIN 3 and END 3 markers:**

```c
/* Infinite loop */
/* USER CODE BEGIN WHILE */
while (1)
{
  /* USER CODE END WHILE */

  /* USER CODE BEGIN 3 */

  // Turn LED ON
  HAL_GPIO_WritePin(LED_NORTH_GPIO_Port, LED_NORTH_Pin, GPIO_PIN_SET);
  HAL_Delay(500);  // Wait 500 milliseconds

  // Turn LED OFF
  HAL_GPIO_WritePin(LED_NORTH_GPIO_Port, LED_NORTH_Pin, GPIO_PIN_RESET);
  HAL_Delay(500);  // Wait 500 milliseconds

}
/* USER CODE END 3 */
```

---

### ðŸ” Code Breakdown:

#### **Line 1: Turn LED ON**
```c
HAL_GPIO_WritePin(LED_NORTH_GPIO_Port, LED_NORTH_Pin, GPIO_PIN_SET);
```
- `HAL_GPIO_WritePin()` = STM32 function to control a pin
- `LED_NORTH_GPIO_Port` = Port E (auto-generated by CubeMX)
- `LED_NORTH_Pin` = Pin 9 (auto-generated by CubeMX)
- `GPIO_PIN_SET` = Set pin HIGH (turn LED ON)

#### **Line 2: Wait**
```c
HAL_Delay(500);
```
- Wait 500 milliseconds (0.5 seconds)
- Uses built-in timer (SysTick)

#### **Line 3: Turn LED OFF**
```c
HAL_GPIO_WritePin(LED_NORTH_GPIO_Port, LED_NORTH_Pin, GPIO_PIN_RESET);
```
- `GPIO_PIN_RESET` = Set pin LOW (turn LED OFF)

#### **Line 4: Wait Again**
```c
HAL_Delay(500);
```
- Wait another 500ms before loop repeats

---

## Part 4: Upload to Your Board! (20 mins)

### ðŸ”Œ Step 1: Connect Your Board

1. Get a **USB Mini-B cable**
2. Connect to the **USB ST-LINK** port (NOT the USER USB port!)
3. Connect other end to your laptop
4. **Red LED (LD1 or PWR)** should turn ON
5. Windows should recognize "STM32 STLink"

---

### ðŸš€ Step 2: Build and Upload

#### Build the Project:
1. Click **Project** â†’ **Build Project** (or Ctrl+B)
2. Wait for compilation
3. Check the **Console** - should say: `Build Finished. 0 errors`

#### Upload to Board:
1. Click **Run** â†’ **Debug** (or F11)
2. If prompted about perspective, click **Yes**
3. STM32CubeIDE will:
   - Flash your code to the board
   - Start debugging
   - Pause at `main()`

#### Run Your Code:
1. Click **Resume** button (â–¶ï¸ or F8)
2. **WATCH YOUR LED BLINK!** ðŸ’¡

---

### ðŸŽ‰ CONGRATULATIONS!

**YOU JUST:**
- âœ… Wrote embedded C code
- âœ… Compiled it for ARM Cortex-M4
- âœ… Flashed it to real hardware
- âœ… Controlled physical hardware with code!

**You're now an embedded programmer!** ðŸš€

---

## Part 5: Experiments - Level Up! (30 mins)

### ðŸ§ª Experiment 1: Change Blink Speed

**Make it blink faster:**
```c
HAL_Delay(200);  // Change both delays to 200ms
```

**Make it blink slower:**
```c
HAL_Delay(1000);  // Change both delays to 1 second
```

**Try different patterns:**
```c
HAL_GPIO_WritePin(LED_NORTH_GPIO_Port, LED_NORTH_Pin, GPIO_PIN_SET);
HAL_Delay(100);   // Short ON pulse
HAL_GPIO_WritePin(LED_NORTH_GPIO_Port, LED_NORTH_Pin, GPIO_PIN_RESET);
HAL_Delay(1000);  // Long OFF pause
```

---

### ðŸ§ª Experiment 2: Toggle Function

**Replace your code with this:**
```c
while (1)
{
  HAL_GPIO_TogglePin(LED_NORTH_GPIO_Port, LED_NORTH_Pin);
  HAL_Delay(500);
}
```

**What's different?**
- `TogglePin()` = Automatically flips the pin state
- If ON â†’ turns OFF
- If OFF â†’ turns ON
- **Shorter code, same result!**

---

### ðŸ§ª Experiment 3: Multiple LEDs!

**Add more LEDs to your project:**

#### Go back to CubeMX:
1. Click the **`.ioc`** file in your project
2. Configure more pins:
   - **PE10** â†’ GPIO_Output â†’ Label: `LED_EAST`
   - **PE12** â†’ GPIO_Output â†’ Label: `LED_WEST`
3. Generate code again

#### Update your code:
```c
while (1)
{
  // Turn ON North LED
  HAL_GPIO_WritePin(LED_NORTH_GPIO_Port, LED_NORTH_Pin, GPIO_PIN_SET);
  HAL_Delay(200);

  // Turn OFF North, Turn ON East
  HAL_GPIO_WritePin(LED_NORTH_GPIO_Port, LED_NORTH_Pin, GPIO_PIN_RESET);
  HAL_GPIO_WritePin(LED_EAST_GPIO_Port, LED_EAST_Pin, GPIO_PIN_SET);
  HAL_Delay(200);

  // Turn OFF East, Turn ON West
  HAL_GPIO_WritePin(LED_EAST_GPIO_Port, LED_EAST_Pin, GPIO_PIN_RESET);
  HAL_GPIO_WritePin(LED_WEST_GPIO_Port, LED_WEST_Pin, GPIO_PIN_SET);
  HAL_Delay(200);

  // Turn OFF West
  HAL_GPIO_WritePin(LED_WEST_GPIO_Port, LED_WEST_Pin, GPIO_PIN_RESET);
  HAL_Delay(200);
}
```

**Upload and watch the pattern!**

---

## Part 6: Understanding HAL vs Register Level (15 mins)

### What You Just Used: HAL (Hardware Abstraction Layer)

**HAL Code (Easy):**
```c
HAL_GPIO_WritePin(LED_NORTH_GPIO_Port, LED_NORTH_Pin, GPIO_PIN_SET);
```

**What HAL Does Behind the Scenes (Register Level):**
```c
GPIOE->BSRR = (1 << 9);  // Set bit 9 in BSRR register
```

### Why Learn Both?

**HAL (High-Level):**
- âœ… Easy to read
- âœ… Portable across STM32 families
- âœ… Less error-prone
- âŒ Slower execution
- âŒ Hides hardware details

**Register (Low-Level):**
- âœ… Faster execution
- âœ… Full control
- âœ… Understand hardware deeply
- âŒ Harder to read
- âŒ More error-prone

**For automotive: You need BOTH!**
- Use HAL for rapid development
- Use registers for performance-critical code

---

## ðŸŽ¯ Today's Challenge (Do Before Day 3!)

### Challenge: Create a "Heartbeat" Pattern

**Requirements:**
1. LED blinks twice quickly
2. Pauses
3. Repeats

**Pattern:**
- ON 100ms â†’ OFF 100ms â†’ ON 100ms â†’ OFF 1000ms â†’ REPEAT

**Hint:**
```c
while (1)
{
  // Beat 1
  HAL_GPIO_WritePin(___);
  HAL_Delay(___);

  // Gap
  HAL_GPIO_WritePin(___);
  HAL_Delay(___);

  // Beat 2
  HAL_GPIO_WritePin(___);
  HAL_Delay(___);

  // Long pause
  HAL_GPIO_WritePin(___);
  HAL_Delay(___);
}
```

**Fill in the blanks and upload!**

---

## ðŸ“ Day 2 Summary

### What You Learned:
- âœ… STM32CubeIDE project creation
- âœ… Pin configuration with CubeMX
- âœ… HAL library basics
- âœ… GPIO control (WritePin, TogglePin)
- âœ… Delay functions
- âœ… Build, flash, and debug workflow
- âœ… Experimented with real hardware!

### What You Built:
- âœ… Working LED blink program
- âœ… Multiple LED patterns
- âœ… Your first embedded C project on REAL hardware!

---

## ðŸš€ Next Steps (Day 3 Preview):

Tomorrow you'll learn:
- **Registers Deep Dive:** Direct hardware control
- **Bit Manipulation in Practice:** Control multiple LEDs efficiently
- **Button Input:** Read GPIO pins
- **Your First Interactive Program:** Button controls LED!

---

## ðŸ’¾ IMPORTANT: Save Your Work!

```bash
cd C:\PersonalLearning\Projects\-Automotive-Embedded-Projects
git add .
git commit -m "Day 2: First LED blink program on STM32F303!"
git push
```

**Also copy your STM32CubeIDE project:**
```
Copy from: C:\PersonalLearning\STM32_Workspace\LED_Blink_Project
To: C:\PersonalLearning\Projects\-Automotive-Embedded-Projects\LED_Blink_Project
```

---

## ðŸŽ‰ AMAZING WORK TODAY!

You went from zero to blinking an LED on real hardware!

**Any issues? Common troubleshooting:**
- Board not detected? Check USB cable (use ST-LINK port)
- Build errors? Make sure code is between USER CODE markers
- LED not blinking? Check which port you're using (should be ST-LINK, not USER)

---

**Ready to try it? Let's BLINK THAT LED!** ðŸ’¡ðŸš€

